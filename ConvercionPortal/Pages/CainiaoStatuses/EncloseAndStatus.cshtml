@page "{id}"
@using ConvercionPortal.Models
@model ConvercionPortal.Pages.CainiaoStatuses.EncloseAndStatusModel
@{
}

<h1 class="app-page-title">Вложимое и статус Cainiao</h1>
<div class="row g-4 settings-section">
	<div class="col-12 col-md-4">
		<h3 class="section-title">Id=@Model.encloseAndCNStatus?.EncloseId OwnerId=@Model.encloseAndCNStatus?.EncloseOwnerId</h3>
		<div class="section-intro">-----</div>
	</div>
	<div class="col-12 col-md-8">
		<div class="app-card app-card-settings shadow-sm p-4">
						    
			<div class="app-card-body">
				<div class="mb-2"><strong>EncloseId:</strong> @Model.encloseAndCNStatus.EncloseId</div>
				<div class="mb-2"><strong>EncloseOwnerId:</strong> @Model.encloseAndCNStatus.EncloseOwnerId</div>
				<div class="mb-2"><strong>Флаг проблемы:</strong> @Model.encloseAndCNStatus.TroubleFlag</div>
				<div class="mb-2"><strong>Завершена:</strong> @Model.encloseAndCNStatus.FinishedFlag</div>
				<h4>История статусов</h4>

				<div class="table-responsive">
                <table class="table app-table-hover mb-0 text-left">
                    <thead>
						<tr>
							<th class="cell">Статус ПП</th>
                            <th class="cell">Тип кладовки</th>
							<th class="cell">Статус Cainiao</th>
							<th class="cell">Дата создания</th>
							<th class="cell"></th>
						</tr>
					</thead>

                    <tbody>
                        @foreach(CainiaoStatusEvent CnEvent in Model.encloseAndCNStatus.StatusHistory)
                        {
                            <tr>
								<td class="cell">@CnEvent.PPStatus</td>
                                <td class="cell">@CnEvent.PPWarehouseType</td>
                                <td class="cell">@CnEvent.CainiaoStatusCode</td>
								<td class="cell">@CnEvent.DateOfCreate</td>
								<td class="cell"><a class="btn-sm app-btn-secondary" asp-page="/CainiaoStatuses/EncloseAndStatus" asp-route-ID="@Model.encloseAndCNStatus.StringId()" asp-route-ORDER="0">Открыть</a></td>
							</tr>
                        }
						<tr>
								<td class="cell"></td>
                                <td class="cell"></td>
                                <td class="cell"></td>
								<td class="cell"></td>
								<td class="cell"><a class="btn-sm app-btn-secondary" asp-page="/CainiaoStatuses/NewCNStatusEvent" asp-route-ID="@Model.encloseAndCNStatus.StringId()" asp-route-ORDER="1">Добавить</a></td>
							</tr>
                    </tbody>
                </table>
            </div>

				<hr class="my-4">
				<div class="row justify-content-between">
					<div class="col-auto">
						<a class="btn app-btn-primary" asp-page="/CainiaoStatuses/EncloseAndStatusList">К списку</a>
					</div>
				</div>
								    
			</div><!--//app-card-body-->
						    
		</div><!--//app-card-->
	</div>
</div><!--//row-->
